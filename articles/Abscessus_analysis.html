<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="abscessus">
<title>Abscessus_analysis • abscessus</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Abscessus_analysis">
<meta property="og:description" content="abscessus">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">abscessus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Abscessus_analysis.html">Abscessus_analysis</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="Abscessus_analysis_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Abscessus_analysis</h1>
            
      
      
      <div class="d-none name"><code>Abscessus_analysis.Rmd</code></div>
    </div>

    
    
<div class="section level3">
<h3 id="load-packages-and-anonymised-data-clean">Load packages and anonymised data, clean<a class="anchor" aria-label="anchor" href="#load-packages-and-anonymised-data-clean"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/DesiQuintans/librarian" class="external-link">librarian</a></span><span class="op">)</span></span>
<span><span class="fu">librarian</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/librarian/man/shelf.html" class="external-link">shelf</a></span><span class="op">(</span><span class="va">survival</span>, <span class="va">survminer</span>,<span class="va">martinlaw</span><span class="op">/</span><span class="va">abscessus</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   These packages will be installed:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   'survminer'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   It may take some time.</span></span>
<span><span class="co">#&gt; also installing the dependencies 'crayon', 'diffobj', 'rematch2', 'pkgload', 'praise', 'waldo', 'testthat', 'numDeriv', 'SparseM', 'MatrixModels', 'minqa', 'nloptr', 'RcppEigen', 'carData', 'abind', 'pbkrtest', 'quantreg', 'lme4', 'commonmark', 'Rcpp', 'corrplot', 'car', 'colorspace', 'markdown', 'png', 'jpeg', 'gtable', 'isoband', 'ggrepel', 'ggsci', 'cowplot', 'ggsignif', 'polynom', 'rstatix', 'exactRankTests', 'mvtnorm', 'farver', 'labeling', 'munsell', 'RColorBrewer', 'viridisLite', 'backports', 'ellipsis', 'generics', 'tidyselect', 'KMsurv', 'data.table', 'zoo', 'km.ci', 'xtable', 'gridtext', 'ggplot2', 'ggpubr', 'gridExtra', 'maxstat', 'scales', 'broom', 'dplyr', 'tidyr', 'survMisc', 'ggtext'</span></span>
<span></span>
<span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="st">"../data/abscessus_data.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create more informative variables:</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">infected</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span>test<span class="op">=</span><span class="va">dat</span><span class="op">$</span><span class="va">abscessuss_yes_1</span>, yes<span class="op">=</span><span class="st">"Infected"</span>, no<span class="op">=</span><span class="st">"Not infected"</span><span class="op">)</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">alive</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span>test<span class="op">=</span><span class="va">dat</span><span class="op">$</span><span class="va">alive_yes_1</span>, yes<span class="op">=</span><span class="st">"Alive"</span>, no<span class="op">=</span><span class="st">"Not alive"</span><span class="op">)</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">lung.dysfun</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span>test<span class="op">=</span><span class="va">dat</span><span class="op">$</span><span class="va">CLAD_yes_1</span>, yes<span class="op">=</span><span class="st">"Yes"</span>, no<span class="op">=</span><span class="st">"No"</span><span class="op">)</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">airway.injury</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span>test<span class="op">=</span><span class="va">dat</span><span class="op">$</span><span class="va">airway_injury_yes_1</span>, yes<span class="op">=</span><span class="st">"Injury"</span>, no<span class="op">=</span><span class="st">"No Injury"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span><span class="op">==</span><span class="st">"survival_post_tx"</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="st">"time"</span></span>
<span><span class="va">dat</span><span class="op">$</span><span class="va">status</span> <span class="op">&lt;-</span> <span class="op">-</span><span class="fl">1</span><span class="op">*</span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">alive_yes_1</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="difference-in-mortality">Difference in mortality<a class="anchor" aria-label="anchor" href="#difference-in-mortality"></a>
</h2>
<div class="section level3">
<h3 id="binary">Binary<a class="anchor" aria-label="anchor" href="#binary"></a>
</h3>
<p>Begin with 2x2 table:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">dat</span><span class="op">$</span><span class="va">infected</span>, <span class="va">dat</span><span class="op">$</span><span class="va">alive</span><span class="op">)</span></span>
<span><span class="va">con</span></span>
<span><span class="co">#&gt;               </span></span>
<span><span class="co">#&gt;                Alive Not alive</span></span>
<span><span class="co">#&gt;   Infected         7         2</span></span>
<span><span class="co">#&gt;   Not infected    43        16</span></span></code></pre></div>
<p>Treating survival as binary: No difference between groups when using Fisher’s Exact Test:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/fisher.test.html" class="external-link">fisher.test</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span> </span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Fisher's Exact Test for Count Data</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; data:  con</span></span>
<span><span class="co">#&gt; p-value = 1</span></span>
<span><span class="co">#&gt; alternative hypothesis: true odds ratio is not equal to 1</span></span>
<span><span class="co">#&gt; 95 percent confidence interval:</span></span>
<span><span class="co">#&gt;   0.2147327 14.0893634</span></span>
<span><span class="co">#&gt; sample estimates:</span></span>
<span><span class="co">#&gt; odds ratio </span></span>
<span><span class="co">#&gt;   1.297558</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="survival-analysis">Survival analysis<a class="anchor" aria-label="anchor" href="#survival-analysis"></a>
</h3>
<div class="section level4">
<h4 id="plot">Plot<a class="anchor" aria-label="anchor" href="#plot"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu">survfit</span><span class="op">(</span><span class="fu">Surv</span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">infected</span>, data <span class="op">=</span> <span class="va">dat</span><span class="op">)</span></span>
<span><span class="fu">ggsurvplot</span><span class="op">(</span><span class="va">fit</span>, data<span class="op">=</span><span class="va">dat</span><span class="op">)</span></span></code></pre></div>
<p><img src="Abscessus_analysis_files/figure-html/plot%20mortality-1.png" width="576"></p>
</div>
<div class="section level4">
<h4 id="log-rank-test">Log-rank test<a class="anchor" aria-label="anchor" href="#log-rank-test"></a>
</h4>
<p>The log-rank test finds no difference in survival times between the two groups, and is the most appropriate model as it does not assume proportional hazards.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit.diff</span> <span class="op">&lt;-</span> <span class="fu">survdiff</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/formula.html" class="external-link">formula</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span>, data<span class="op">=</span><span class="va">dat</span><span class="op">)</span></span>
<span><span class="va">fit.diff</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; survdiff(formula = formula(fit), data = dat)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                        N Observed Expected (O-E)^2/E (O-E)^2/V</span></span>
<span><span class="co">#&gt; infected=Infected      9        2     2.48    0.0937     0.109</span></span>
<span><span class="co">#&gt; infected=Not infected 59       16    15.52    0.0150     0.109</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Chisq= 0.1  on 1 degrees of freedom, p= 0.7</span></span>
<span><span class="va">fit.diff</span><span class="op">$</span><span class="va">pvalue</span></span>
<span><span class="co">#&gt; [1] 0.7415316</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="cox-ph">Cox PH<a class="anchor" aria-label="anchor" href="#cox-ph"></a>
</h4>
<p>Fitting a Cox proportional hazards model also does not show an effect, though from the plot above, the assumption of proportional hazards appears to not hold.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cox.no.covar</span> <span class="op">&lt;-</span> <span class="fu">coxph</span><span class="op">(</span><span class="fu">Surv</span><span class="op">(</span><span class="va">time</span>, <span class="va">status</span><span class="op">)</span> <span class="op">~</span> <span class="va">infected</span>, data <span class="op">=</span> <span class="va">dat</span><span class="op">)</span></span>
<span><span class="va">cox.no.covar</span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; coxph(formula = Surv(time, status) ~ infected, data = dat)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;                        coef exp(coef) se(coef)     z     p</span></span>
<span><span class="co">#&gt; infectedNot infected 0.2468    1.2799   0.7502 0.329 0.742</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Likelihood ratio test=0.12  on 1 df, p=0.7341</span></span>
<span><span class="co">#&gt; n= 68, number of events= 18</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
